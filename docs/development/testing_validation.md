# 测试与验证

本文档记录了工具测试和兼容性验证相关的任务。

## 1. 全面测试更新/撤销功能

*(进行中)* **(D2, I1)**

*   **目标:** 持续测试单站点更新和撤销功能，覆盖各种筛选条件、更新字段和字段操作模式 (`overwrite`, `append`, `remove`, `merge`, `delete_keys`)。
*   **方法:**
    *   手动构造不同的 `update_config.yaml` 场景。
    *   在测试用的 One API 实例上执行模拟运行和实际更新。
    *   验证更新结果是否符合预期。
    *   执行撤销操作，验证渠道状态是否成功恢复。
*   **重点关注:** 边缘情况、并发更新时的稳定性、撤销数据的准确性。

## 2. VO API 适配确认

*(待办)* **(D3, I2)**

*   **目标:** 确认工具在连接到 `api_type: "voapi"` 类型的 One API 实例时，核心功能（获取渠道、筛选、更新、撤销、测试启用）能够正常工作。
*   **背景:** 虽然 NewAPI 和 VOAPI 的数据库结构据说一致，但 API 端点、请求/响应格式以及行为可能存在细微差异。
*   **方法:**
    *   准备一个运行 VOAPI 版本的 One API 测试实例。
    *   使用为 NewAPI 测试过的 `update_config.yaml` 场景，将连接配置指向 VOAPI 实例并设置 `api_type: "voapi"`。
    *   执行更新、撤销、测试启用等操作，观察日志和 API 交互，检查是否出现 VOAPI 特有的错误或非预期行为。
    *   特别注意字段支持的差异，以及 `--test-and-enable-disabled` 功能在 VOAPI 上的表现（因为 VOAPI 通常会返回 `key`）。
*   **预期工作量:** 预计较小，主要是验证和记录可能存在的细微不兼容之处。